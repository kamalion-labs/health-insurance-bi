model Operadora {
  id               Int                @id @default(autoincrement())
  nome             String
  arquivos         ArquivoOperadora[]
  EmpresaOperadora EmpresaOperadora[]
  planos           Plano[]
}

model ArquivoOperadora {
  id        Int                  @id @default(autoincrement())
  nome      String
  tipo      TipoArquivoOperadora @default(txt)
  separador String
  tabela    String

  operadora   Operadora @relation(fields: [idOperadora], references: [id])
  idOperadora Int
}

model Empresa {
  id               Int                @id @default(autoincrement())
  nome             String
  CNPJ             String
  numeroContrato   String
  inicioContrato   DateTime
  fimContrato      DateTime
  indiceReajuste   Int
  limitadorTecnico Int
  coparticipacoes  Coparticipacao[]
  empresaOperadora EmpresaOperadora[]
  pessoas          Pessoa[]
}

model Coparticipacao {
  id        Int     @id @default(autoincrement())
  nome      String
  CNPJ      String
  empresa   Empresa @relation(fields: [idEmpresa], references: [id])
  idEmpresa Int
}

model EmpresaOperadora {
  empresa     Empresa   @relation(fields: [idEmpresa], references: [id])
  idEmpresa   Int
  operadora   Operadora @relation(fields: [idOperadora], references: [id])
  idOperadora Int

  @@id([idEmpresa, idOperadora])
}

model ColunaArquivo {
  id               Int        @id @default(autoincrement())
  nome             String
  coluna           String
  tipo             TipoColuna
  posicao          Int?
  inicio           Int?
  fim              Int?
  referenciaTabela String?
  referenciaColuna String?
}

model Plano {
  id      Int       @id @default(autoincrement())
  nome    String
  pessoas Pessoa[]

  operadora   Operadora @relation(fields: [idOperadora], references: [id])
  idOperadora Int
}

enum TipoArquivoOperadora {
  txt
  csv
  xls
  xlsx
}

enum TipoColuna {
  string
  number
  date
  mesAno
  referencia
}

